{"mappings":"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","sources":["src/js/refs.js","src/index.js"],"sourcesContent":["export const refs = {\n  logo: document.querySelector(\".navigation__logo\"),\n  searchBox: document.querySelector(\".search__box\"),\n  homeButton: document.querySelector(\".navigation__home\"),\n  libraryButton: document.querySelector(\".navigation__library\"),\n  watchedButton: document.querySelector(\".button__watched\"),\n  queueButton: document.querySelector(\".button__queue\"),\n  gallery: document.querySelector(\".gallery\"),\n  galleryCards: document.querySelectorAll(\".gallery__card\"),\n  modalBackground: document.querySelector(\".overlay\"),\n  modalClose: document.querySelector(\".modal__close\"),\n  modalWatch: document.querySelector(\".modal__watch\"),\n  modalQueue: document.querySelector(\".modal__queue\"),\n  maxPage: 20,\n};\n","import { refs } from \"./js/refs\";\n\n// Initial gallery population function goes here\n\nmodalListener();\n\nrefs.logo.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n  document.body.className = \"home watched\";\n\n  //Gallery population function for this page goes here\n\n  console.log(\"Populating Home page\");\n});\n\nrefs.homeButton.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n  document.body.classList.replace(\"library\", \"home\");\n\n  //Gallery population function for this page goes here\n\n  console.log(\"Populating Home page\");\n});\n\nrefs.libraryButton.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n  document.body.classList.replace(\"home\", \"library\");\n\n  //Gallery population function for this page goes here\n\n  console.log(\"Populating Library Watched page\");\n});\n\nrefs.watchedButton.addEventListener(\"click\", () => {\n  document.body.classList.replace(\"queue\", \"watched\");\n\n  //Gallery population function for this page goes here\n\n  console.log(\"Populating Library Watched page\");\n});\n\nrefs.queueButton.addEventListener(\"click\", () => {\n  document.body.classList.replace(\"watched\", \"queue\");\n\n  //Gallery population function for this page goes here\n\n  console.log(\"Populating Library Queue page\");\n});\n\nfunction modalListener() {\n  const modalOpener = (event) => {\n    dataSource = event.currentTarget.querySelector(\"img\").dataset.page;\n    document.body.classList.toggle(\"modal-on\");\n\n    // Modal population function goes here. Don't forget the spinner.\n\n    console.log(\"Get your link to data for modal here: \" + dataSource);\n    modalCloser();\n  };\n\n  refs.galleryCards = document.querySelectorAll(\".gallery__card\");\n\n  refs.galleryCards.forEach(\n    (element) => {\n      element.addEventListener(\"click\", modalOpener);\n    }\n\n    // For reasons unfathomable (array change?) JS doesn't want to remove event\n    // listeners through the same algorithm. It is not crucial as the cards will be\n    // loaded anew with each page change and will loose all their event listeners\n    // and observers. If it really is that important you can use this simple trick:\n    // element.replaceWith(element.cloneNode(true))\n  );\n}\n\n// Honestly see no reason to remove Event Listeners\n// They could be added at the start of the session\n// and they would stay on for the remainder.\n// My personal belief: adding and removing listeners\n// is more taxing on CPu than just letting them stay on.\n// But whatever. Here's the function:\n\nfunction modalCloser() {\n  const backgroundClose = (event) => {\n    if (event.target == event.currentTarget) {\n      document.body.classList.toggle(\"modal-on\");\n      refs.modalClose.removeEventListener(\"click\", crossClose);\n      window.removeEventListener(\"keydown\", modalEsc);\n      refs.modalBackground.removeEventListener(\"click\", backgroundClose);\n    }\n  };\n\n  const crossClose = (event) => {\n    document.body.classList.toggle(\"modal-on\");\n    refs.modalBackground.removeEventListener(\"click\", backgroundClose);\n    window.removeEventListener(\"keydown\", modalEsc);\n    refs.modalClose.removeEventListener(\"click\", crossClose);\n  };\n\n  const modalEsc = (event) => {\n    if (event.key === \"Escape\") {\n      if (document.body.classList.contains(\"modal-on\")) {\n        document.body.classList.toggle(\"modal-on\");\n        refs.modalBackground.removeEventListener(\"click\", backgroundClose);\n        refs.modalClose.removeEventListener(\"click\", crossClose);\n        window.removeEventListener(\"keydown\", modalEsc);\n      }\n    }\n  };\n\n  refs.modalBackground.addEventListener(\"click\", backgroundClose);\n\n  refs.modalClose.addEventListener(\"click\", crossClose);\n\n  window.addEventListener(\"keydown\", modalEsc);\n}\n\n// And here are modal button listeners that will stay on\n// for the remainder of the session. And nothing bad will\n// happen. I prefer this way better.\n\nrefs.modalWatch.addEventListener(\"click\", () => {\n  // Watch list update function goes here\n  console.log(\"Adding to watch list\");\n});\n\nrefs.modalQueue.addEventListener(\"click\", () => {\n  // Queue update function goes here\n  console.log(\"Adding to queue\");\n});\n\n// Lazy load below. It currently doesn't work as Parcel works\n// in mysterious ways. Will work with external image links though.\n// Meanwhile the main script has been commented out.\n\nfunction lazyLoad() {\n  refs.galleryCards = document.querySelectorAll(\".gallery__card\");\n\n  var firstItem = document.querySelector(\".gallery__card\");\n  var itemGap = [\n    ...document.defaultView.getComputedStyle(firstItem.parentElement).gap,\n  ];\n  itemGap = parseInt(`${itemGap[0]}${itemGap[1]}`);\n  var itemSize = `${\n    Math.ceil(firstItem.getBoundingClientRect().height) + itemGap\n  }px`;\n\n  const onEntry = (observerEntries) => {\n    observerEntries.forEach(({ target, isIntersecting }) => {\n      if (isIntersecting) {\n        // let source = target.firstElementChild.dataset.source;\n        // target.firstElementChild.src = source;\n      }\n    });\n  };\n\n  const observerOptions = { root: null, rootMargin: itemSize };\n\n  const observer = new IntersectionObserver(onEntry, observerOptions);\n\n  refs.galleryCards.forEach((element) => {\n    observer.unobserve(element);\n    observer.observe(element);\n  });\n}\n\nlazyLoad();\n"],"names":["$37e33676934ad046$export$21666b427502ea6d","logo","document","querySelector","searchBox","homeButton","libraryButton","watchedButton","queueButton","gallery","galleryCards","querySelectorAll","modalBackground","modalClose","modalWatch","modalQueue","maxPage","modalOpener","event","dataSource","currentTarget","dataset","page","body","classList","toggle","console","log","backgroundClose","target","removeEventListener","crossClose","window","modalEsc","key","contains","addEventListener","$b8f9b7833fa37166$var$modalCloser","forEach","element","$b8f9b7833fa37166$var$modalListener","preventDefault","className","replace","firstItem","itemGap","defaultView","getComputedStyle","parentElement","gap","parseInt","itemSize","Math","ceil","getBoundingClientRect","height","observer","IntersectionObserver","observerEntries","isIntersecting","root","rootMargin","unobserve","observe","$b8f9b7833fa37166$var$lazyLoad"],"version":3,"file":"index.4902e4c6.js.map"}